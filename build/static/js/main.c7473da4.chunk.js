(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(14),o=n.n(r),c=n(3),a=n(1),i=n(0),u=function(e){var t=e.person,n=e.deletePerson;return Object(i.jsxs)("div",{className:"person",children:[t.name," : ",t.number,Object(i.jsx)("button",{value:t.id,name:t.name,onClick:n,children:"delete"})]},t.id)},s=function(e){var t=e.persons,n=e.showFilter,r=e.deletePerson,o=n?t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(n.toLowerCase())})):t;return console.log(n),Object(i.jsx)("div",{children:o.map((function(e){return Object(i.jsx)(u,{person:e,deletePerson:r},e.name)}))})},d=function(e){var t=e.addPerson,n=e.newName,r=e.handleNameChange,o=e.newNumber,c=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:n,onChange:r})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:o,onChange:c})]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var t=e.showFilter,n=e.handleSearchChange;return Object(i.jsx)("div",{children:Object(i.jsxs)("div",{children:[" input shown with: ",Object(i.jsx)("input",{value:t,onChange:n})," "]})})},j=n(4),h=n.n(j),f="/api/notes",b=function(){return h.a.get(f).then((function(e){return e.data}))},m=function(e){return h.a.post(f,e).then((function(e){return e.data}))},O=function(e,t){return h.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){return h.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var t=e.message;return null===t?null:Object(i.jsx)("div",{className:"error",children:t})},g=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),u=Object(c.a)(o,2),j=u[0],h=u[1],f=Object(a.useState)(""),g=Object(c.a)(f,2),x=g[0],w=g[1],C=Object(a.useState)(""),S=Object(c.a)(C,2),y=S[0],N=S[1],T=Object(a.useState)(""),P=Object(c.a)(T,2),k=P[0],F=P[1];Object(a.useEffect)((function(){b().then((function(e){r(e)}))}),[]);var D=function(){return Object(i.jsxs)("div",{style:{color:"green",fontStyle:"italic",fontSize:16},children:[Object(i.jsx)("br",{}),Object(i.jsx)("em",{children:"Phonebook app, Department of Computer Science, University of Helsinki 2021"})]})};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(p,{message:k}),Object(i.jsx)(l,{showFilter:y,handleSearchChange:function(e){console.log(e.target.value),N(e.target.value)}}),Object(i.jsx)("h2",{children:"Add New"}),Object(i.jsx)(d,{addPerson:function(e){e.preventDefault(),console.log("person added",e.target);var t={name:j,number:x};if(n.find((function(e){return e.name===j})))if(window.confirm("".concat(j," is already added to phonebook, do you want to update the existing contact?"))){var o=n.find((function(e){return e.name===j}));O(o.id,t).then((function(e){r(n.map((function(t){return t.id!==o?t:e}))),h(""),w("")})).catch((function(e){F("the person '".concat(o.name,"' was already deleted from server")),setTimeout((function(){F(null)}),5e3),r(n.filter((function(e){return e.id!==o.id}))),h(""),w("")}))}else h(""),w("");else m(t).then((function(e){r(n.concat(e)),h(""),w(""),F("Added ".concat(j)),setTimeout((function(){F(null)}),5e3)}));b().then((function(e){r(e)}))},newName:j,handleNameChange:function(e){console.log(e.target.value),h(e.target.value)},newNumber:x,handleNumberChange:function(e){console.log(e.target.value),w(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(s,{persons:n,showFilter:y,deletePerson:function(e){var t=n.find((function(t){return t.id===e.target.value}));window.confirm("Do you want to delete ".concat(e.target.name," ?"))&&v(e.target.value).then((function(n){r(Object.values(n).filter((function(t){return t.id!==e.target.value}))),console.log(t)})).catch((function(t){F("the person '".concat(e.target.name,"' was already deleted from server")),setTimeout((function(){F(null)}),5e3),r(Object.values(n).filter((function(t){return t.id!==e.target.value})))})),b().then((function(e){r(e)}))}}),Object(i.jsx)(D,{})]})};n(38);o.a.render(Object(i.jsx)(g,{notes:[{id:1,content:"HTML is easy",date:"2019-05-30T17:30:31.098Z",important:!0},{id:2,content:"Browser can execute only JavaScript",date:"2019-05-30T18:39:34.091Z",important:!1},{id:3,content:"GET and POST are the most important methods of HTTP protocol",date:"2019-05-30T19:20:14.298Z",important:!0}]}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c7473da4.chunk.js.map